var map=null,customInfobox=null,highestComparisonIndex=4,compareBoxID="ctl00_MainContent_maincontent_divCompare[i]",compareDivID="ctl00_MainContent_maincontent_divCompare[i]",compareLabelID="ctl00_MainContent_maincontent_lblComparePlaceHolder[i]",compareOOPEId="ctl00_MainContent_maincontent_lblOOPE[i]",providerHiddenID="ctl00_MainContent_maincontent_hCompareProviderFinderID[i]",addressHiddenID="ctl00_MainContent_maincontent_hAddressID[i]",sourceSystemHiddenID="ctl00_MainContent_maincontent_hSourceSystemID[i]",compareCloseID="divCompareClose[i]",compareButtonID="ctl00_MainContent_maincontent_btnCompare",provMapContent=[],compareSelectedCount=0,siteCulture="",GoogleInfoWindow;document.getElementById(compareButtonID).disabled=true;function compareButtonClick(){var b="providerid=",c=lowestOpenCompareBox();if(c==0)c=5;for(var a=1;a<c;a++){b+=document.getElementById(providerHiddenID.replace("[i]",a)).value;if(a<c-1)b+="-"}b+="&addressid=";for(var a=1;a<c;a++){b+=document.getElementById(addressHiddenID.replace("[i]",a)).value;if(a<c-1)b+="-"}b+="&SS=";for(var a=1;a<c;a++){b+=document.getElementById(sourceSystemHiddenID.replace("[i]",a)).value;if(a<c-1)b+="-"}return b}function populateComparison(b){var a,c;if($(b)[0].checked){$("#compareResultsView").show();a=lowestOpenCompareBox();if(a!=0){$("#"+compareBoxID.replace("[i]",a)).show();$("#"+compareCloseID.replace("[i]",a)).show();if(a>1){document.getElementById(compareButtonID).disabled=false;$('[id$="btnCompare"]').removeClass("inactivecomparebuttonblue").addClass("btn-blueCompare");$("input[id$='btnCompare']").removeAttr("disabled")}document.getElementById(addressHiddenID.replace("[i]",a)).value=$(b).parent().attr("addId");document.getElementById(compareLabelID.replace("[i]",a)).innerText=$("<div />").html($(b).parent().attr("name")).text();document.getElementById(compareLabelID.replace("[i]",a)).textContent=$("<div />").html($(b).parent().attr("name")).text();var d=$(b).parent().attr("OOPE");if(d!=null&&d!="Unavailable"){$(document.getElementById(compareOOPEId.replace("[i]",a))).html("You may pay "+$(b).parent().attr("OOPE"));$(document.getElementById(compareLabelID.replace("[i]",a))).css("color","#0078AB");$("#compareResultsView").height(170)}d!=null&&$("#compareResultsView").height(170);document.getElementById(providerHiddenID.replace("[i]",a)).value=$(b).parent().attr("providerID");document.getElementById(sourceSystemHiddenID.replace("[i]",a)).value=$(b).parent().attr("ss");allCompareBoxVisible()&&$("#providerResultListContent :input:not(:checked)").attr("disabled",true);compareSelectedCount++}else $("#providerResultListContent :input:not(:checked)").attr("disabled",true)}else{c=findProviderComparisonIndex($(b).parent().attr("providerID"),$(b).parent().attr("addId"));c!=0&&removeComparisonBox(c);var e=false;$("div[name='compareDoctors']").each(function(){if($(this).is(":visible"))e=true});!e&&$("#compareResultsView").hide()}}function removeComparisonBox(b){var c=lowestOpenCompareBox();compareSelectedCount--;if($("#providerResultListContent :input:checked").length>=1)for(var a=0;a<$("#providerResultListContent :input:checked").length;a++)if($("#providerResultListContent :input:checked")[a].parentNode.attributes.providerID.value==document.getElementById(providerHiddenID.replace("[i]",b)).value&&$("#providerResultListContent :input:checked")[a].parentNode.attributes.addId.value==document.getElementById(addressHiddenID.replace("[i]",b)).value){$("#providerResultListContent :input:checked")[a].checked=false;break}if(b<c-1){$("#"+compareBoxID.replace("[i]",c-1)).hide();$("#"+compareCloseID.replace("[i]",c-1)).hide();for(var a=b;a<c-1;a++){document.getElementById(compareLabelID.replace("[i]",a)).innerText=document.getElementById(compareLabelID.replace("[i]",a+1)).innerText;document.getElementById(compareLabelID.replace("[i]",a)).textContent=document.getElementById(compareLabelID.replace("[i]",a+1)).textContent;document.getElementById(compareLabelID.replace("[i]",a+1)).innerText="";document.getElementById(compareLabelID.replace("[i]",a+1)).textContent="";if($("#"+compareOOPEId.replace("[i]",a)).length>0){document.getElementById(compareOOPEId.replace("[i]",a)).innerText=document.getElementById(compareOOPEId.replace("[i]",a+1)).innerText;document.getElementById(compareOOPEId.replace("[i]",a)).textContent=document.getElementById(compareOOPEId.replace("[i]",a+1)).textContent;document.getElementById(compareOOPEId.replace("[i]",a+1)).innerText="";document.getElementById(compareOOPEId.replace("[i]",a+1)).textContent=""}document.getElementById(providerHiddenID.replace("[i]",a)).value=document.getElementById(providerHiddenID.replace("[i]",a+1)).value;document.getElementById(providerHiddenID.replace("[i]",a+1)).value="";document.getElementById(addressHiddenID.replace("[i]",a)).value=document.getElementById(addressHiddenID.replace("[i]",a+1)).value;document.getElementById(addressHiddenID.replace("[i]",a+1)).value=""}}else{$("#"+compareBoxID.replace("[i]",b)).hide();$("#"+compareCloseID.replace("[i]",b)).hide();document.getElementById(compareLabelID.replace("[i]",b)).innerText="";document.getElementById(compareLabelID.replace("[i]",b)).textContent="";if($("#"+compareOOPEId.replace("[i]",b)).length>0){document.getElementById(compareOOPEId.replace("[i]",b)).innerText="";document.getElementById(compareOOPEId.replace("[i]",b)).textContent=""}document.getElementById(providerHiddenID.replace("[i]",b)).value=""}if(compareSelectedCount<2){document.getElementById(compareButtonID).disabled=true;$('[id$="btnCompare"]').removeClass("btn-blueCompare").addClass("inactivecomparebuttonblue");$('[id$="btnCompare"]').css("color","#FFFFFF");$("input[id$='btnCompare']").attr("disabled","disabled")}$("#providerResultListContent :input:not(:checked)").attr("disabled",false);var d=false;$("div[name='compareDoctors']").each(function(){if($(this).is(":visible"))d=true});!d&&$("#compareResultsView").hide()}function findProviderComparisonIndex(d,e){for(var b,c,a=1;a<=highestComparisonIndex;a++){b=document.getElementById(providerHiddenID.replace("[i]",a)).value;c=document.getElementById(addressHiddenID.replace("[i]",a)).value;if(d==b&&e==c)return a}return 0}function lowestOpenCompareBox(){for(var a=1;a<=highestComparisonIndex;a++)if(!isVisible(document.getElementById(compareBoxID.replace("[i]",a))))return a;return 0}function allCompareBoxVisible(){for(var a=1;a<=highestComparisonIndex;a++)if(!isVisible(document.getElementById(compareBoxID.replace("[i]",a))))return false;return true}function printMap(){$("div .pinStyle").find("span").each(function(){var a=$(this).html();if($.trim(a)=="")$(this).parent().css("display","none");else $(this).parent().css("display","block")})}function mapSlide(c){var b="",a="";siteCulture=c;if(siteCulture!="es-MX")if($("a[id$='PrintResultsLinkRS']").is(":visible")&&$("a[id$='PrintResultsLinkRS']").attr("href").indexOf("&mapIsVisible")>0)b=$("a[id$='PrintResultsLinkRS']").attr("href").substring(0,$("a[id$='PrintResultsLinkRS']").attr("href").indexOf("&mapIsVisible"));else b=$("a[id$='PrintResultsLinkRS']").attr("href");if($("#myMapView").is(":visible")){$("#myMapPrintResult").hide();$("#myMapView").slideUp("slow",function(){$(".pinStyle").css("display","none");$("#btnViewMap").val("");$("#btnViewMap").removeClass("SearchResultHideMapView");$("#providerResultContent #PrintMapPDF").hide();$("#btnViewMap").addClass("viewmapbutton");$("#btnViewMap").css("background-image",'url("'+$("input[id$='hiddenbtnviewmapimage']").val()+'")');if(map!=null){map.dispose();map=null}customInfobox!=null&&customInfobox.hide()});a="false"}else{$("#myMapPrintResult").hide();$("#myMapView").slideDown("slow",function(){$("#btnViewMap").val("");$("#btnViewMap").removeClass("viewmapbutton");$("#btnViewMap").addClass("SearchResultHideMapView");$("#btnViewMap").css("background-image",'url("'+$("input[id$='hiddenbtnhidemapimage']").val()+'")');currentviewselected!=10&&$("#view10").trigger("click");GetMap();for(var a=mapStartIndex;a<=mapEndIndex;a++)$('span[count="'+(a+1).toString()+'"]').parent().css("display","block")});a="true"}siteCulture!="es-MX"&&$("a[id$='PrintResultsLinkRS']").attr("href",b+"&mapIsVisible="+a)}function seeMapSlide(d,c){var b="",a="";siteCulture=d;if(siteCulture!="es-MX")if($("a[id$='PrintResultsLinkRS']").is(":visible")&&$("a[id$='PrintResultsLinkRS']").attr("href").indexOf("&mapIsVisible")>0)b=$("a[id$='PrintResultsLinkRS']").attr("href").substring(0,$("a[id$='PrintResultsLinkRS']").attr("href").indexOf("&mapIsVisible"));else b=$("a[id$='PrintResultsLinkRS']").attr("href");if($("#myMapView").is(":visible")){$("#myMapPrintResult").hide();$("#myMapView").slideUp("slow",function(){$(".pinStyle").css("display","none");$("#btnViewMap").val("");$("#btnViewMap").removeClass("SearchResultHideMapView");$("#providerResultContent #PrintMapPDF").hide();$("#btnViewMap").addClass("viewmapbutton");$("#btnViewMap").css("background-image",'url("'+$("input[id$='hiddenbtnviewmapimage']").val()+'")');if(map!=null){map.dispose();map=null}customInfobox!=null&&customInfobox.hide()});a="false"}$("#myMapPrintResult").hide();$("#myMapView").scrollTop();$("#myMapView").slideDown("slow",function(){$("#btnViewMap").val("");$("#btnViewMap").removeClass("viewmapbutton");$("#btnViewMap").addClass("SearchResultHideMapView");$("#btnViewMap").css("background-image",'url("'+$("input[id$='hiddenbtnhidemapimage']").val()+'")');currentviewselected!=10&&$("#view10").trigger("click");var b=mapStartIndex,d=mapEndIndex;mapStartIndex=mapEndIndex=c;GetMap();mapStartIndex=b;mapEndIndex=d;for(var a=mapStartIndex;a<=mapEndIndex;a++)a==c&&$('span[count="'+(a+1).toString()+'"]').parent().css("display","block")});a="true";siteCulture!="es-MX"&&$("a[id$='PrintResultsLinkRS']").attr("href",b+"&mapIsVisible="+a)}function LoadMapDataintoArray(){provMapContent=[];$("table.pagination","div[id$='searchResultContent']").each(function(){var a=$("span[id$='lblMapData']",this).html();a!=""&&provMapContent.push(a)})}function GetPrintMap(){if(map==null)if(Brand.toUpperCase()=="GHEALTHCARE")GenerateGooglePrintMap();else GenerateBingPrintMap()}function GenerateGooglePrintMap(){}function GenerateBingPrintMap(){map=new Microsoft.Maps.Map(document.getElementById("myMapView"),{credentials:$("input[id$='txtMapKey']").val(),mapTypeId:Microsoft.Maps.MapTypeId.road,enableSearchLogo:false,zoom:10,showCopyright:false,showLogo:false,showMapTypeSelector:false});if(typeof provMapContent!="undefined")if($.trim(provMapContent)!=""){var g=provMapContent.split("#+"),a=[],b=0;if(typeof startPoint!="undefined")if($.trim(startPoint)!=""){var d=startPoint.split(","),c=new Microsoft.Maps.Location(parseFloat(d[0]),parseFloat(d[1])),f=new Microsoft.Maps.Pushpin(c,{text:"S",textOffset:new Microsoft.Maps.Point(0,2)});map.entities.push(f);a.push(c)}$(g).each(function(i,h){if(h!=""){var f=h.split("|"),d,g;if(f[2]!=""){d=f[2].split(";");if(d[0]!="0"&&d[1]!="0"){b=parseInt(b)+1;g=new Microsoft.Maps.Location(parseFloat(d[0]),parseFloat(d[1]));var e=new Microsoft.Maps.Pushpin(g,{text:b.toString(),textOffset:new Microsoft.Maps.Point(0,2)});e.title=f[0];var c=f[1].split(";");e.description="<div style='position:absolute;top:25px;left:10px;width:220px;'>"+c[0]+" miles away</div><div id='addr' style='position:absolute;top:40px;left:10px;width:220px;'>"+c[1]+"</div><div id='statecity' style='position:absolute;top:50px;left:10px;width:220px;'>"+c[2]+", "+c[3]+"</div><div id='zip' style='position:absolute;top:60px;left:10px;width:220px;'>"+c[4]+"</div><div style='position:absolute;top:80px;left:10px;width:220px;'>"+c[5]+"</div>";e.address=c[1]+","+c[2]+","+c[3]+","+c[4];e.latlong=d[0]+","+d[1];map.entities.push(e);Microsoft.Maps.Events.addHandler(e,"click",displayInfobox);Microsoft.Maps.Events.addHandler(map,"viewchange",hideInfobox);a.push(g)}}}});pinInfobox=new Microsoft.Maps.Infobox(new Microsoft.Maps.Location(0,0));var e=Microsoft.Maps.LocationRect.fromLocations(a);map.setView({bounds:e})}}function GetMap(){clearPushPinImageCount();if(Brand.toUpperCase()=="GHEALTHCARE"){var b=$("input[id$='txtMapKey']").val(),a=document.createElement("script");a.type="text/javascript";a.src="https://maps.googleapis.com/maps/api/js?v=3.9&client="+b+"&sensor=false&callback=GetGoogleMap";document.body.appendChild(a)}else GetBingMap()}function GetGoogleMap(){var i=$("span[id$='lblStartPoint']").html(),e=i.split(","),j=new google.maps.LatLngBounds;if(g==null)var p={zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},g=new google.maps.Map(document.getElementById("myMapView"),p);if(i!="")if($.trim(i)!=","){var m=new google.maps.LatLng(e[0],e[1]);j.extend(m);var o="https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=S|EF8835|000000",q=new google.maps.Marker({position:m,map:g,draggable:false,icon:o})}if(typeof provMapContent!="undefined"&&provMapContent.length>0){for(var s=0,n=0,b=[],a=mapStartIndex;a<=mapEndIndex;a++){$('span[count="'+(a+1).toString()+'"]').parent().css("display","block");if($('span[count="'+(a+1).toString()+'"]').html()==""){n++;$('span[count="'+(a+1).toString()+'"]').html(n.toString())}else continue;if(provMapContent[a]!=null){var c=provMapContent[a].split("|"),d={};d.name=c[0];var k;k=c[0];d.address=c[1];d.latlong=c[2];d.mapAddress=c[3];d.pinText=$('span[count="'+(a+1).toString()+'"]').html();for(var f=a+1;f<=mapEndIndex;f++)if(provMapContent[a]!=""&&provMapContent[f]!=""&&provMapContent[f]!=null){var h=provMapContent[f].split("|");if(c[2]!=""&&h[2]!="")if(c[2]==h[2]){var r=$('span[count="'+(a+1).toString()+'"]').html();$('span[count="'+(f+1).toString()+'"]').html(r);k+=","+h[0]}}d.name=k;b.push(d)}}for(var a=0;a<b.length;a++)if(typeof b[a]!="undefined"&&b[a]!=""){var e,l;e=b[a].latlong.split(";");if(e[0]!="0"&&e[1]!="0"){l=new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1]));j.extend(l);var o="https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld="+b[a].pinText+"|EF8835|000000",q=new google.maps.Marker({position:l,map:g,draggable:false,icon:o,title:b[a].name});(function(a,c){google.maps.event.addListener(c,"click",function(){var e=b[a].address.split("+"),d='<div style="padding:10px;position:relative;float:left;border:1px solid #ffffff;background-color:#ffffff;min-width:100px;min-height:50px;">';d+='<span style="font-family:arial,arialMT;font-size:14px;color:#000;">'+b[a].name.split(",").join("<br/>")+"</span><br/>";d+='<span style="font-family:arial,arialMT;font-size:10px;color:#000;">'+e[0]+" miles away<br/>";d+=e[1].lastIndexOf("<br/>")==-1?e[1]+"<br/>":e[1];d+=e[2]+", "+e[3]+"  "+e[4]+"<br/>"+e[5]+"</span>";d+='<br/><span style="font-family:arial,arialMT;font-size:10px;float:right">';d+="<a onclick=\"ShowDrivingModal('"+b[a].name+"','"+b[a].mapAddress+"','"+b[a].latlong.replace(/\;/g,",")+"','');\" href=\"#\">Driving Directions</a>";d+="</span></div>";if(siteCulture=="es-MX")d=d.replace("miles away","millas lejos");if(!GoogleInfoWindow)GoogleInfoWindow=new google.maps.InfoWindow;GoogleInfoWindow.setContent(d);GoogleInfoWindow.open(g,c)})})(a,q)}}g.fitBounds(j)}}function GetBingMap(){if(map==null)if($.browser.msie&&$.browser.version=="6.0"){var r=$("#myMapView")[0].offsetHeight,t=$("#myMapView")[0].offsetWidth;map=new Microsoft.Maps.Map(document.getElementById("myMapView"),{credentials:$("input[id$='txtMapKey']").val(),mapTypeId:Microsoft.Maps.MapTypeId.road,enableSearchLogo:false,zoom:10,showCopyright:false,showLogo:false,showMapTypeSelector:false,height:r,width:t})}else map=new Microsoft.Maps.Map(document.getElementById("myMapView"),{credentials:$("input[id$='txtMapKey']").val(),mapTypeId:Microsoft.Maps.MapTypeId.road,enableSearchLogo:false,zoom:10,showCopyright:false,showLogo:false,showMapTypeSelector:false});if(typeof provMapContent!="undefined"&&provMapContent.length>0){var j=[],v=0,m=$("span[id$='lblStartPoint']").html();if($.trim(m)!=""){var o=m.split(","),n=new Microsoft.Maps.Location(parseFloat(o[0]),parseFloat(o[1])),s=new Microsoft.Maps.Pushpin(n,{text:"S",textOffset:new Microsoft.Maps.Point(0,2)});map.entities.push(s);j.push(n)}for(var p=0,c=[],a=mapStartIndex;a<=mapEndIndex;a++){$('span[count="'+(a+1).toString()+'"]').parent().css("display","block");if($('span[count="'+(a+1).toString()+'"]').html()==""){p++;$('span[count="'+(a+1).toString()+'"]').html(p.toString())}else continue;if(provMapContent[a]!=null){var e=provMapContent[a].split("|"),f={};f.name=e[0];var k;k=e[0];f.address=e[1];f.latlong=e[2];f.mapAddress=e[3];f.pinText=$('span[count="'+(a+1).toString()+'"]').html();for(var h=a+1;h<=mapEndIndex;h++)if(provMapContent[a]!=""&&provMapContent[h]!=""&&provMapContent[h]!=null){var i=provMapContent[h].split("|");if(e[2]!=""&&i[2]!="")if(e[2]==i[2]){var u=$('span[count="'+(a+1).toString()+'"]').html();$('span[count="'+(h+1).toString()+'"]').html(u);k+=","+i[0]}}f.name=k;c.push(f)}}for(var a=0;a<c.length;a++)if(typeof c[a]!="undefined"&&c[a]!=""){var g,l;g=c[a].latlong.split(";");if(g[0]!="0"&&g[1]!="0"){l=new Microsoft.Maps.Location(parseFloat(g[0]),parseFloat(g[1]));var b=new Microsoft.Maps.Pushpin(l,{text:c[a].pinText.toString(),textOffset:new Microsoft.Maps.Point(0,2)});b.title=c[a].name;var d=c[a].address.split("+");b.description="<span style='font-family:arial,arialMT;font-size:10px;color:#000;'>"+d[0]+" miles away<br/>";b.description+=d[1].lastIndexOf("<br/>")==-1?d[1]+"<br/>":d[1];b.description+=d[2]+", "+d[3]+"<br/>"+d[4]+"<br/>"+d[5]+"</span>";b.address=c[a].mapAddress;b.latlong=g[0]+","+g[1];if(siteCulture=="es-MX")b.description=b.description.replace("miles away","millas lejos");map.entities.push(b);Microsoft.Maps.Events.addHandler(b,"click",displayInfobox);j.push(l)}}Microsoft.Maps.registerModule("CustomInfoboxModule","/includes/providerfinder/searchresult/V7CustomInfobox.js");Microsoft.Maps.loadModule("CustomInfoboxModule",{callback:function(){customInfobox=new CustomInfobox(map,{orientation:0,color:"#ffffff",arrowWidth:20,borderColor:"#ffffff",arrowLength:20,offset:{x:0,y:25},tether:true,showArrow:true})}});var q=Microsoft.Maps.LocationRect.fromLocations(j);map.setView({bounds:q})}}function clearPushPinImageCount(){for(var a=mapStartIndex;a<=mapEndIndex;a++)$('span[count="'+(a+1).toString()+'"]').html()!=""&&$('span[count="'+(a+1).toString()+'"]').html("")}function displayInfobox(a){if(a.targetType=="pushpin"&&customInfobox!=null){var b=["<div style='padding:10px'>"],d=a.target.title.replace(/,/g,"<br />");b.push("<span style='font-family:arial,arialMT;font-size:14px;color:#000;'>",d,"</span><br/>");b.push(a.target.description,"<br/>");var c="";if(siteCulture=="es-MX")c="Indicaciones sobre c\u00f3mo llegar en auto";else c="Driving Directions";b.push("<span style='font-family:arial,arialMT;font-size:10px;float:right'><a href='#' onclick=\"customInfobox.hide();ShowDrivingModal('"+a.target.title.replace("'","%27")+"','"+a.target.address+"','"+a.target.latlong+"','"+siteCulture+"');\">"+c+"</a></span>");b.push("</div>");customInfobox.show(a.target.getLocation(),b.join(""))}}function ProviderRedirectHelper(a){SearchResults.NavProviderdetails(a)}function isVisible(a){if(typeof a!="undefined"&&a!=null){var b="getComputedStyle"in window?window.getComputedStyle(a,null):a.currentStyle;if(b.visibility!="hidden"&&b.display!="none")return true}return false}