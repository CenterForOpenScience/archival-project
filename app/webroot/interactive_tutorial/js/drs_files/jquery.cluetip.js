(function(a){a.cluetip={version:"1.0.6"};var b,c,h,f,e,i,d,g;a.fn.cluetip=function(l,m){if(typeof l=="object"){m=l;l=null}return l=="destroy"?this.removeData("thisInfo").unbind(".cluetip"):this.each(function(Y){var r=this,o=a(this),n=a.extend(true,{},a.fn.cluetip.defaults,m||{},a.metadata?o.metadata():a.meta?o.data():{}),H=false,R=+n.cluezIndex;o.data("thisInfo",{title:r.title,zIndex:R});var E=false,U=0;if(!a("#cluetip").length){a(['<div id="cluetip">','<div id="cluetip-outer">','<h3 id="cluetip-title"></h3>','<div id="cluetip-inner"></div>',"</div>",'<div id="cluetip-extra"></div>','<div id="cluetip-arrows" class="cluetip-arrows"></div>',"</div>"].join(""))[k](j).hide();b=a("#cluetip").css({position:"absolute"});h=a("#cluetip-outer").css({position:"relative",zIndex:R});c=a("#cluetip-inner");f=a("#cluetip-title");e=a("#cluetip-arrows");i=a('<div id="cluetip-waitimage"></div>').css({position:"absolute"}).css({position:"absolute"}).insertBefore(b).hide()}var T=n.dropShadow?+n.dropShadowSteps:0;if(!d){d=a([]);for(var P=0;P<T;P++)d=d.add(a("<div></div>").css({zIndex:R-1,opacity:.1,top:1+P,left:1+P}));d.css({position:"absolute",backgroundColor:"#000"}).prependTo(b)}var s=o.attr(n.attribute),M=n.cluetipClass;if(!s&&!n.splitTitle&&!l)return true;if(n.local&&n.localPrefix)s=n.localPrefix+s;n.local&&n.hideLocal&&a(s+":first").hide();var w=parseInt(n.topOffset,10),C=parseInt(n.leftOffset,10),y,S,J=isNaN(parseInt(n.height,10))?"auto":/\D/g.test(n.height)?n.height:n.height+"px",O,X,A,u,N,L,Q=parseInt(n.width,10)||275,q=Q+(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0)+T,B=this.offsetWidth,z,p,ab,v,G,F,t=n.attribute!="title"?o.attr(n.titleAttribute):"";if(n.splitTitle){if(t==undefined)t="";F=t.split(n.splitTitle);t=F.shift()}if(n.escapeTitle)t=t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;");var Z;function W(){return false}var K=function(f){if(!n.onActivate(o))return false;E=true;b.removeClass().css({width:Q});s==o.attr("href")&&o.css("cursor",n.cursor);n.hoverClass&&o.addClass(n.hoverClass);X=A=o.offset().top;z=o.offset().left;v=f.pageX;N=f.pageY;if(r.tagName.toLowerCase()!="area"){O=a(document).scrollTop();G=a(window).width()}if(n.positionBy=="fixed"){if(B==0)B=50;p=B+z+C;b.css({left:p})}else{p=B>z&&z>q||z+B+q+C>G?z-q-C:B+z+C;if(r.tagName.toLowerCase()=="area"||n.positionBy=="mouse"||B+q>G)if(v+20+q>G){b.addClass(" cluetip-"+M);p=v-q-C>=0?v-q-C-parseInt(b.css("marginLeft"),10)+parseInt(c.css("marginRight"),10):v-q/2}else p=v+C;var d=p<0?f.pageY+w:f.pageY;b.css({left:p>0&&n.positionBy!="bottomTop"?p:v+q/2>G?G/2-q/2:Math.max(v-q/2,0),zIndex:o.data("thisInfo").zIndex});e.css({zIndex:o.data("thisInfo").zIndex+1})}S=a(window).height();if(l){if(typeof l=="function")l=l.call(r);c.html(l);x(d)}else if(F){var j=F.length;c.html(j?F[0]:"");if(j>1)for(var k=1;k<j;k++)c.append('<div class="split-body">'+F[k]+"</div>");x(d)}else if(!n.local&&s.indexOf("#")!==0)if(/\.(jpe?g|tiff?|gif|png)$/i.test(s)){c.html('<img src="'+s+'" alt="'+t+'" />');x(d)}else if(H&&n.ajaxCache){c.html(H);x(d)}else{var m=n.ajaxSettings.beforeSend,D=n.ajaxSettings.error,y=n.ajaxSettings.success,u=n.ajaxSettings.complete,K={cache:false,url:s,beforeSend:function(a){m&&m.call(r,a,b,c);h.children().empty();if(n.waitImage){c.html('<img src="loader.gif" alt="Close" align="middle" style="text-align:center;display:block;margin-left: auto; margin-right: auto" />');x(d)}},error:function(d,a){if(E)if(D)D.call(r,d,a,b,c);else c.html("<i>sorry, the contents could not be loaded</i>")},success:function(a,d){H=n.ajaxProcess.call(r,a);if(E){y&&y.call(r,a,d,b,c);c.html(H)}},complete:function(j,h){u&&u.call(r,j,h,b,c);var e=c[0].getElementsByTagName("img");g=e.length;for(var f=0,k=e.length;f<k;f++)if(e[f].complete)g--;if(g&&!a.browser.opera)a(e).bind("load error",function(){g--;if(g<1){i.hide();E&&x(d)}});else{i.hide();E&&x(d)}}},I=a.extend(true,{},n.ajaxSettings,K);a.ajax(I)}else if(n.local){var J=a(s+(/#\S+$/.test(s)?"":":eq("+Y+")")).clone(true).show();c.html(J);x(d)}},x=function(l){b.addClass("cluetip-"+M);if(n.truncate){var k=c.text().slice(0,n.truncate)+"...";c.html(k)}t?f.show().html(t):n.showTitle?f.show().html("&nbsp;"):f.hide();if(n.sticky){if(n.closeButton){var i=a('<div id="cluetip-close"><a href="#">'+n.closeText+"</a></div>");n.closePosition=="bottom"?i.appendTo(c):n.closePosition=="title"?i.prependTo(f):i.prependTo(c);i.bind("click.cluetip",function(){D();return false})}else a(".cluetip-close").length>0&&a(".cluetip-close").bind("click.cluetip",function(){D();return false});if(n.mouseOutClose)b.bind("mouseleave.cluetip",function(){D()});else b.unbind("mouseleave.cluetip")}var g="";h.css({zIndex:o.data("thisInfo").zIndex,overflow:J=="auto"?"visible":"auto",height:J});y=J=="auto"?Math.max(b.outerHeight(),b.height()):parseInt(J,10);u=A;L=O+S;if(n.positionBy=="fixed")u=A-n.dropShadowSteps+w;else if(p<v&&Math.max(p,0)+q>v||n.positionBy=="bottomTop")if(A+y+w>L&&N-O>y+w){u=N-y-w;g="top"}else{u=N+w;g="bottom"}else if(A+y+w>L)u=y>=S?O:L-y-w;else if(o.css("display")=="block"||r.tagName.toLowerCase()=="area"||n.positionBy=="mouse")u=l-w;else u=A-n.dropShadowSteps;if(g=="")p<z?(g="left"):(g="right");b.css({top:u+"px"}).removeClass().addClass("clue-"+g+"-"+M).addClass(" cluetip-"+M);if(n.arrows){var j=A-u-n.dropShadowSteps;e.css({top:/(left|right)/.test(g)&&p>=0&&j>0?j+"px":/(left|right)/.test(g)?0:""}).show()}else e.hide();d.hide();b.hide()[n.fx.open](n.fx.openSpeed||0);n.dropShadow&&d.css({height:y,width:Q,zIndex:o.data("thisInfo").zIndex-1}).show();a.fn.bgiframe&&b.bgiframe();if(n.delayedClose>0)U=setTimeout(D,n.delayedClose);n.onShow.call(r,b,c)},I=function(){E=false;i.hide();if(!n.sticky||/click|toggle/.test(n.activation)){D();clearTimeout(U)}n.hoverClass&&o.removeClass(n.hoverClass)},D=function(){h.parent().hide().removeClass();n.onHide.call(r,b,c);o.removeClass("cluetip-clicked");t&&o.attr(n.titleAttribute,t);o.css("cursor","");n.arrows&&e.css({top:""})};a(document).bind("hideCluetip",function(){D()});if(/click|toggle/.test(n.activation))o.bind("click.cluetip",function(c){if(b.is(":hidden")||!o.is(".cluetip-clicked")){K(c);a(".cluetip-clicked").removeClass("cluetip-clicked");o.addClass("cluetip-clicked")}else I(c);this.blur();return false});else if(n.activation=="focus"){o.bind("focus.cluetip",function(a){K(a)});o.bind("blur.cluetip",function(a){I(a)})}else{o[n.clickThrough?"unbind":"bind"]("click",W);var V=function(a){if(n.tracking==true){var c=p-a.pageX,d=u?u-a.pageY:A-a.pageY;o.bind("mousemove.cluetip",function(a){b.css({left:a.pageX+c,top:a.pageY+d})})}};if(a.fn.hoverIntent&&n.hoverIntent)o.hoverIntent({sensitivity:n.hoverIntent.sensitivity,interval:n.hoverIntent.interval,over:function(a){K(a);V(a)},timeout:n.hoverIntent.timeout,out:function(a){I(a);o.unbind("mousemove.cluetip")}});else o.bind("mouseenter.cluetip",function(a){K(a);V(a)}).bind("mouseleave.cluetip",function(a){I(a);o.unbind("mousemove.cluetip")});o.bind("mouseover.cluetip",function(){o.attr("title","")}).bind("mouseleave.cluetip",function(){o.attr("title",o.data("thisInfo").title)})}})};a.fn.cluetip.defaults={width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:false,localPrefix:null,hideLocal:true,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:false,showTitle:true,cluetipClass:"default",hoverClass:"",waitImage:true,cursor:"help",arrows:false,dropShadow:true,dropShadowSteps:6,sticky:false,mouseOutClose:false,activation:"hover",clickThrough:false,tracking:false,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,closeButton:true,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return true},onShow:function(){},onHide:function(){},ajaxCache:true,ajaxProcess:function(a){a=a.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"");return a},ajaxSettings:{dataType:"html"},debug:false};var k="appendTo",j="body";a.cluetip.setup=function(a){if(a&&a.insertionType&&a.insertionType.match(/appendTo|prependTo|insertBefore|insertAfter/))k=a.insertionType;if(a&&a.insertionElement)j=a.insertionElement}})(jQuery)