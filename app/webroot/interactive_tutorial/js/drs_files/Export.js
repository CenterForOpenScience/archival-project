if(typeof PFGlobal=="undefined")var PFGlobal={SourceLoad:{FileExport:false}};else if(typeof PFGlobal.SourceLoad=="undefined")PFGlobal.SourceLoad={FileExport:false};else if(typeof PFGlobal.SourceLoad.FileExport=="undefined")PFGlobal.SourceLoad.FileExport=false;if(typeof PFGlobal.SourceLoad.ControlBase=="undefined"||!PFGlobal.SourceLoad.ControlBase)setTimeout(function(){if(typeof PFGlobal.SourceLoad.ControlBase=="undefined"||!PFGlobal.SourceLoad.ControlBase)setTimeout(arguments.callee,100);else PF_FileExport_Class()},100);else PF_FileExport_Class();function PF_FileExport_Class(){FileExport.prototype=new ControlBase;FileExport.prototype.constructor=FileExport;FileExport.prototype.WireLinks=function(a){$('#EmailFaxTrayList a[id$="lnkEmail"]').live("click",function(){var b=new FileExport,c={Type:"email",Params:$(this).attr("ExportParams")};a.Navigate("FileExport",b,c)});$('#EmailFaxTrayList a[id$="lnkFax"]').live("click",function(){var b=new FileExport,c={Type:"fax",Params:$(this).attr("ExportParams")};a.Navigate("FileExport",b,c)})};FileExport.prototype.Init=function(a){ControlBase.prototype.Init.call(this,a);this.Type=a.Type;this.ExportParams=a.Params;FileExport.prototype.PFPath=a.SourceUrl;if(IsSecure)this.ControlPath="/navigate.aspx?site=providerfinderconsumer&cat=providerdirectory&page=searchresults"+a.Type;else this.ControlPath="/navigate.aspx?site=providerfinderpublic&cat=provider-directory&page=search-results-"+a.Type};FileExport.prototype.Load=function(){var a={ExportParams:this.ExportParams};ControlBase.prototype.LoadWithParams.call(this,this.SourceUrl,this.ControlPath,a)};PFGlobal.SourceLoad.FileExport=true}function FileExport(){ControlBase.call(this);this.ResponseContainer="maincontent";this.NavControlType=="FileExport"}function isValidEmailAddress(a){var b=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return b.test(a)}function faxNumberValidation(){var a=new RegExp(/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/),b=$('#ProviderFinder_FaxModal input[id$="txtPhone1"]').val()+$('#ProviderFinder_FaxModal input[id$="txtPhone2"]').val()+$('#ProviderFinder_FaxModal input[id$="txtPhone3"]').val();if(a.test(b)){$("#ProviderFinder_FaxModal #ValidationFaxNumberError").hide();return true}else{$("#ProviderFinder_FaxModal #ValidationFaxNumberError").show();return false}}function textCounter(a,c,b){if(a.value.length>b)a.value=a.value.substring(0,b);else c.value=a.value.length}function faxFromName(){var a=$('#ProviderFinder_FaxModal input[id$="txtYourName"]').val();if(a.length>=2){$("#ProviderFinder_FaxModal #ValidationNameError").hide();return true}else{$("#ProviderFinder_FaxModal #ValidationNameError").show();return false}}function autoTab(a,b){a.value.length==a.maxLength&&b!=null&&a.form.elements[b].focus()}function faxToName(){var a=$('#ProviderFinder_FaxModal input[id$="txtRecipientName"]').val();if(a.length>=2){$("#ProviderFinder_FaxModal #ValidationRecipientError").hide();return true}else{$("#ProviderFinder_FaxModal #ValidationRecipientError").show();return false}}function fromEmailValidation(){var a=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(a.test($('#ProviderFinder_EmailModal input[id$="txtFrom"]').val()))$("#ProviderFinder_EmailModal #ValidationFromError").hide();else{$("#ProviderFinder_EmailModal #ValidationFromError #ErrorFromMessage").val("Invalid From Email");$("#ProviderFinder_EmailModal #ValidationFromError").show()}}function toEmailValidation(){var a=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(a.test($('#ProviderFinder_EmailModal input[id$="txtTo"]').val()))$("#ProviderFinder_EmailModal #ValidationToMessage").hide();else{$("#ProviderFinder_EmailModal #ValidationToMessage #ErrorToMessage").val("Invalid Receipient Email");$("#ProviderFinder_EmailModal #ValidationToMessage").show()}}function FileExport_SendEmail(){var b=true,a=true,c=true,g=EmailSvc_Params,j=EmailSvc_Site,k=$('#ProviderFinder_EmailModal input[id$="txtTo"]').val(),i=$('#ProviderFinder_EmailModal input[id$="txtFrom"]').val(),h=$('#ProviderFinder_EmailModal textarea[id$="txtMessage"]').val(),e=$('#ProviderFinder_EmailModal input[id$="chkEmailSelf"]').is(":checked"),d=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(d.test($('#ProviderFinder_EmailModal input[id$="txtTo"]').val())){b=true;$("#ProviderFinder_EmailModal #ValidationToMessage").hide()}else{$("#ProviderFinder_EmailModal #ValidationToMessage #ErrorToMessage").val("Invalid Receipient Email");$("#ProviderFinder_EmailModal #ValidationToMessage").show();b=false}if(d.test($('#ProviderFinder_EmailModal input[id$="txtFrom"]').val())){$("#ProviderFinder_EmailModal #ValidationFromError").hide();a=true}else{$("#ProviderFinder_EmailModal #ValidationFromError #ErrorFromMessage").val("Invalid From Email");$("#ProviderFinder_EmailModal #ValidationFromError").show();a=false}if($.trim($('#ProviderFinder_EmailModal textarea[id$="txtMessage"]').val())==""){$("#ProviderFinder_EmailModal #ValidationBodyError #ErrorBodyMessage").val("Message. This is a required field.");$("#ProviderFinder_EmailModal #ValidationBodyError").show();c=false}else $("#ProviderFinder_EmailModal #ValidationBodyError").hide();if(a&&b&&c){var f={exportParams:g,site:j,to:k,from:i,body:h,copySender:e};$("#ProviderFinder_EmailModal #SubmitButtons").hide();$("#ProviderFinder_EmailModal #SubmitInProgress").show();$.ajax({url:FileExport.prototype.PFPath+"/webcontrols/providerfinder/services/Providerfinder_wcf.svc/SendPdfEmail?callback=?",data:f,dataType:"json",success:function(a){$("#ProviderFinder_EmailModal #SubmitInProgress").hide();if(a.HasError)$("#ProviderFinder_EmailModal #SubmitError").show();else $("#ProviderFinder_EmailModal #SubmitSuccessful").show()},error:function(){$("#ProviderFinder_EmailModal #SubmitInProgress").hide();$("#ProviderFinder_EmailModal #SubmitError").show()}})}}function FileExport_SendFax(){var b=false,c=false,a=false,h=FaxSvc_Params,j=FaxSvc_Site,g=$('#ProviderFinder_FaxModal input[id$="txtPhone1"]').val()+$('#ProviderFinder_FaxModal input[id$="txtPhone2"]').val()+$('#ProviderFinder_FaxModal input[id$="txtPhone3"]').val(),k=$('#ProviderFinder_FaxModal input[id$="txtRecipientName"]').val(),i=$('#ProviderFinder_FaxModal input[id$="txtYourName"]').val(),f=$('#ProviderFinder_FaxModal input[id$="txtRe"]').val(),d=$('#ProviderFinder_FaxModal textarea[id$="txtMessage"]').val();if(faxToName()){c=true;$("#ProviderFinder_FaxModal #ValidationRecipientError").hide()}else{$("#ProviderFinder_FaxModal #ValidationRecipientError").show();c=false}if(faxFromName()){$("#ProviderFinder_FaxModal #ValidationNameError").hide();b=true}else{$("#ProviderFinder_FaxModal #ValidationNameError").show();b=false}if(faxNumberValidation())a=true;else a=false;if(c&&b&&a){var e={exportParams:h,site:j,number:g,to:k,from:i,subject:f,comments:d};$("#ProviderFinder_FaxModal #SubmitButtons").hide();$("#ProviderFinder_FaxModal #SubmitInProgress").show();$.ajax({url:FileExport.prototype.PFPath+"/webcontrols/providerfinder/services/Providerfinder_wcf.svc/SendFax?callback=?",data:e,dataType:"json",success:function(a){$("#ProviderFinder_FaxModal #SubmitInProgress").hide();if(a.HasError){$("#ProviderFinder_FaxModal #SubmitError #ErrorText").val(a.ErrorMessage);$("#ProviderFinder_FaxModal #SubmitError").show()}else $("#ProviderFinder_FaxModal #SubmitSuccessful").show()},error:function(a){$("#ProviderFinder_FaxModal #SubmitError #ErrorText").val(a);$("#ProviderFinder_FaxModal #SubmitError").show()}})}}